<?php
error_reporting(E_ALL);
ini_set('display_errors', 1);

echo "<h2>Pemeriksaan Server</h2>";

$functions = ['curl_init', 'file_get_contents', 'eval', 'allow_url_fopen'];
echo "<table border='1' cellpadding='5'>";
foreach ($functions as $f) {
    $status = function_exists($f) || (ini_get($f) == '1' || strtolower(ini_get($f)) == 'on') ? "✅ Aktif" : "❌ Mati";
    echo "<tr><td>$f</td><td>$status</td></tr>";
}
echo "</table>";

echo "<h2>Tes Koneksi ke GitHub</h2>";
$url = "https://raw.githubusercontent.com/luffyopm/opm/refs/heads/main/3.txt";

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_TIMEOUT, 10);
$res = curl_exec($ch);
$http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE);
$error = curl_error($ch);
curl_close($ch);

if ($http_code == 200) {
    echo "✅ Berhasil! File ditemukan.<br>";
    echo "<b>Isi File:</b> <pre>" . htmlspecialchars(substr($res, 0, 100)) . "...</pre>";
} else {
    echo "❌ Gagal Terhubung.<br>";
    echo "HTTP Code: $http_code <br>";
    echo "Error: $error";
}
